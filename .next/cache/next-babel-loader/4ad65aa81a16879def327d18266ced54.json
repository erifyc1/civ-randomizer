{"ast":null,"code":"import { MongoClient } from 'mongodb';\nexport default (async (req, res) => {\n  try {\n    const client = await MongoClient.connect('mongodb+srv://user:admin@cluster0-o6jvs.mongodb.net/test?retryWrites=true&w=majority');\n    const db = client.db('civ');\n    res.setHeader('Access-Control-Allow-Origin', '*');\n\n    if (req.query.civ) {\n      res.status(200).json(db.collection('civs').findOne({\n        name: req.query.civ\n      }));\n    } else {\n      res.status(200).json(db.collection('civs').find({}).map(({\n        name,\n        icon\n      }) => ({\n        name,\n        icon\n      })));\n    }\n  } catch (err) {\n    console.log(err);\n    res.status(500).send('Error');\n  }\n});","map":{"version":3,"sources":["D:/Jason/programming/VS Code Workspace/react-tutorial/pages/api/index.js"],"names":["MongoClient","req","res","client","connect","db","setHeader","query","civ","status","json","collection","findOne","name","find","map","icon","err","console","log","send"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,MAAI;AACH,UAAMC,MAAM,GAAG,MAAMH,WAAW,CAACI,OAAZ,CAAoB,sFAApB,CAArB;AACA,UAAMC,EAAE,GAAGF,MAAM,CAACE,EAAP,CAAU,KAAV,CAAX;AAEAH,IAAAA,GAAG,CAACI,SAAJ,CAAc,6BAAd,EAA6C,GAA7C;;AACA,QAAIL,GAAG,CAACM,KAAJ,CAAUC,GAAd,EAAmB;AAClBN,MAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBL,EAAE,CAACM,UAAH,CAAc,MAAd,EAAsBC,OAAtB,CAA8B;AAAEC,QAAAA,IAAI,EAAEZ,GAAG,CAACM,KAAJ,CAAUC;AAAlB,OAA9B,CAArB;AACA,KAFD,MAEO;AACNN,MAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CACCL,EAAE,CACAM,UADF,CACa,MADb,EAEEG,IAFF,CAEO,EAFP,EAGEC,GAHF,CAGM,CAAC;AAAEF,QAAAA,IAAF;AAAQG,QAAAA;AAAR,OAAD,MAAqB;AAAEH,QAAAA,IAAF;AAAQG,QAAAA;AAAR,OAArB,CAHN,CADD;AAMA;AACD,GAfD,CAeE,OAAOC,GAAP,EAAY;AACbC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAf,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBW,IAAhB,CAAqB,OAArB;AACA;AACD,CApBD","sourcesContent":["import { MongoClient } from 'mongodb';\r\n\r\nexport default async (req, res) => {\r\n\ttry {\r\n\t\tconst client = await MongoClient.connect('mongodb+srv://user:admin@cluster0-o6jvs.mongodb.net/test?retryWrites=true&w=majority');\r\n\t\tconst db = client.db('civ');\r\n\r\n\t\tres.setHeader('Access-Control-Allow-Origin', '*');\r\n\t\tif (req.query.civ) {\r\n\t\t\tres.status(200).json(db.collection('civs').findOne({ name: req.query.civ }));\r\n\t\t} else {\r\n\t\t\tres.status(200).json(\r\n\t\t\t\tdb\r\n\t\t\t\t\t.collection('civs')\r\n\t\t\t\t\t.find({})\r\n\t\t\t\t\t.map(({ name, icon }) => ({ name, icon }))\r\n\t\t\t);\r\n\t\t}\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t\tres.status(500).send('Error');\r\n\t}\r\n};\r\n"]},"metadata":{},"sourceType":"module"}